#!/usr/bin/env ruby
require './lib/board.rb'
def board_draw(board)
  puts "#{board[1]} | #{board[2]} | #{board[3]}"
  puts "----------"
  puts "#{board[4]} | #{board[5]} | #{board[6]}"
  puts "----------"
  puts "#{board[7]} | #{board[8]} | #{board[9]}"
end

system "clear"
puts "W E L C O M E    T O   T I C T A C T O E!"
sleep 3
system "clear"

Board.create_board
board_draw(Board.board)

gets

#get names
p 'What is your name palyer1 ? '
name=gets.chomp
player1=Player.new(name,1)

p 'What is your name palyer2 ? '
name=gets.chomp
player2=Player.new(name,2)

p 'SHOW EMPTY BOARD'

i=0   #counter to control left cells
winner=nil
loop do
  movement=''
    loop do
      p "Select a valid cell, #{player1.name} ?"
      movement=gets.chomp
      valid=true
      if movement.match(/\d/)
        valid=Board.exists?(movement.to_i)
        valid=Board.busy?(movement.to_i) if valid
      end
      break if valid
    end
    player1.save_play(movement.to_i)
    winner=player1 if Board.win?(player1.played_cells)
    gets
    system "clear"
    i+=1
    break if i==5
    loop do
      p "Select a valid cell, #{player2.name} ?"
      movement=gets.chomp
      valid=true
      if movement.match(/\d/)
        valid=Board.exists?(movement.to_i)
        valid=Board.busy?(movement.to_i) if valid
      end
      break if valid
    end
    player2.save_play(movement.to_i)
    winner=player2 if Board.win?(player2.played_cells)
    p 'Validate if there is a winner or a tie'
    p "#{name2} this is your movement.."
    p "REDRAW THE BOARD"
    i+=1
    break if i==9 || winner
    p 'Enter to continue'
    gets
    system "clear"
end
p "#{winner.name} IS THE WINNER!" if winner
p 'GAME OVER !'